<%- include('./partials/head') %>
<body>
  
  <div class="signup-container">
    <% if(typeof errorMessage !== 'undefined' && errorMessage.length > 0){ %>
      <div class="error-box">
        <ul>
          <% errorMessage.forEach(msg =>{ %>
            <li><%= msg %></li>
          <% })%>
        </ul>
      </div>
    <% } %>
    <!-- BlogNest heading -->
    <h1 class="blognest-logo-text">BlogNest</h1>

    <form class="signup-form" action="/SignUp" method="POST">
      <h2>Create an Account</h2>

      <div class="input-group">
        <label for="username">Username</label>
        <input type="text" name="username" id="username" value="<%= typeof oldOutput !== 'undefined' ? oldOutput.username : '' %>" required autocomplete="username" />
      </div>

      <div class="input-group">
        <label for="email">Email</label>
        <input type="email" name="email" id="email" value="<%= typeof oldOutput !== 'undefined' ? oldOutput.email : '' %>" required autocomplete="email" />
      </div>

      <div class="input-group">
        <label for="password">Password</label>
        <div class="password-wrapper">
          <input type="password" name="password" id="password" value="<%= typeof oldOutput !== 'undefined' ? oldOutput.password : '' %>" required autocomplete="new-password" />
          <span class="toggle-password" style="cursor:pointer;">ðŸ™ˆ</span>
        </div>
      </div>

      <div class="input-group">
        <label for="confirmPassword">Confirm Password</label>
        <div class="password-wrapper">
            <input type="password" name="confirmPassword" id="confirmPassword" value="<%= typeof oldOutput !== 'undefined' ? oldOutput.confirmPassword : '' %>" required autocomplete="new-password" />
            <span class="toggle-password-confirm" style="cursor:pointer;">ðŸ™ˆ</span>
        </div>
        </div>

      <button type="submit" class="login-btn">Sign Up</button>
      <p class="redirect-text">Already have an account? <a href="/Login">Login</a></p>
    </form>
  </div>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const togglePassword = document.querySelector('.toggle-password');
    const passwordInput = document.getElementById('password');

    const togglePasswordConfirm = document.querySelector('.toggle-password-confirm');
    const confirmPasswordInput = document.getElementById('confirmPassword');

    togglePassword.addEventListener('click', () => {
      const type = passwordInput.getAttribute('type');
      if (type === 'password') {
        passwordInput.setAttribute('type', 'text');
        togglePassword.textContent = 'ðŸ‘€';
      } else {
        passwordInput.setAttribute('type', 'password');
        togglePassword.textContent = 'ðŸ™ˆ';
      }
    });

    togglePasswordConfirm.addEventListener('click', () => {
      const type = confirmPasswordInput.getAttribute('type');
      if (type === 'password') {
        confirmPasswordInput.setAttribute('type', 'text');
        togglePasswordConfirm.textContent = 'ðŸ‘€';
      } else {
        confirmPasswordInput.setAttribute('type', 'password');
        togglePasswordConfirm.textContent = 'ðŸ™ˆ';
      }
    });
  });
</script>

</body>
</html>
